{% extends 'base.html' %} {% block content %}

<section class="section">
  <div class="container">
    <div class="block">

      <form method="POST">
        <div id="file-js-listing" class="file has-name is-fullwidth is-size-4">
          <label class="file-label">
            <input class="file-input" type="file" name="listing_upload">
            <span class="file-cta">
              <span class="file-icon">
                <i class="fas fa-upload"></i>
              </span>
              <span class="file-label">
                Choose a fileâ€¦
              </span>
            </span>
            <span class="file-name">
              No file uploaded
            </span>
          </label>
        </div>
        <div class="block"></div>
        <div class="control">
          <button type="submit" class="button is-fullwidth is-primary has-text-weight-bold  is-size-4">Upload New Listing</button>
        </div>
      </form>

    </div>
    <hr>
    <div class="block">
      <form method="POST" class="is-fullwidth">
        <div class="field has-addons">
          <div class="control is-fullwidth is-size-4">
            <div class="select">
              <select name="file">
                {% for file in files %}
                  <option>{{ file[1] }}</option>
                {% endfor %}
              </select>
            </div>
          </div>
          <div class="control">
            <button
              type="submit"
              name="spotlight"
              class="button is-size-4 is-primary is-light is-outlined"
            >
              Set Spotlight
            </button>
          </div>
        </div>
      </form>
    </div>
    <hr>
    <div class="block">
      <form method="POST" class="is-fullwidth">
        <div class="field">
          <div class="control is-fullwidth is-size-4">
            <div class="select">
              <select name="file">
                {% for file in files %}
                  <option>{{ file[1] }}</option>
                  Confirm Delete?
                {% endfor %}
              </select>
            </div>
          </div>
          <div class="block"> </div>
          <div class="control">
            <label class="checkbox">
              <input type="checkbox" name="delete-confirm">
              Confirm Delete?
            </label>
          </div>
          <div class="block"></div>
          <div class="control">
            <button
              type="submit"
              name="delete"
              class="button is-size-4 is-danger is-light is-outlined"
            >
              Delete
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</section>

<script>
  const fileInput = document.querySelector('#file-js-listing input[type=file]');
  fileInput.onchange = () => {
    if (fileInput.files.length > 0) {
      const fileName = document.querySelector('#file-js-listing .file-name');
      fileName.textContent = fileInput.files[0].name;
    }
  }
</script>

{% endblock %}
